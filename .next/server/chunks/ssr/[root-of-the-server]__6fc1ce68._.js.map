{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///home/user/agenko-nextjs/src/components/UTMProvider.tsx"],"sourcesContent":["// src/components/UTMProvider.tsx\n\"use client\";\n\nimport { useSearchParams } from \"next/navigation\";\nimport { useEffect, ReactNode, Suspense } from \"react\";\n\n// Define the key here so it can be exported and used by other components\nexport const SESSION_STORAGE_KEY = 'marketing_params';\n\nfunction UTMHandler({ children }: { children: ReactNode }) {\n  const searchParams = useSearchParams();\n\n  useEffect(() => {\n    const currentQueryString = searchParams.toString();\n\n    // This is \"first-touch\" attribution. It only saves the parameters\n    // if the URL has them AND if nothing has been saved in this session yet.\n    if (currentQueryString && !sessionStorage.getItem(SESSION_STORAGE_KEY)) {\n      sessionStorage.setItem(SESSION_STORAGE_KEY, currentQueryString);\n    }\n  }, [searchParams]);\n\n  return <>{children}</>;\n}\n\n// The provider component wraps the logic in Suspense, as required by useSearchParams\nexport const UTMProvider = ({ children }: { children: ReactNode }) => {\n  return (\n    <Suspense fallback={null}>\n      <UTMHandler>{children}</UTMHandler>\n    </Suspense>\n  );\n};"],"names":[],"mappings":"AAAA,iCAAiC;;;;;;;;AAGjC;AACA;AAHA;;;;AAMO,MAAM,sBAAsB;AAEnC,SAAS,WAAW,EAAE,QAAQ,EAA2B;IACvD,MAAM,eAAe,IAAA,qJAAe;IAEpC,IAAA,kNAAS,EAAC;QACR,MAAM,qBAAqB,aAAa,QAAQ;QAEhD,kEAAkE;QAClE,yEAAyE;QACzE,IAAI,sBAAsB,CAAC,eAAe,OAAO,CAAC,sBAAsB;YACtE,eAAe,OAAO,CAAC,qBAAqB;QAC9C;IACF,GAAG;QAAC;KAAa;IAEjB,qBAAO;kBAAG;;AACZ;AAGO,MAAM,cAAc,CAAC,EAAE,QAAQ,EAA2B;IAC/D,qBACE,8OAAC,iNAAQ;QAAC,UAAU;kBAClB,cAAA,8OAAC;sBAAY;;;;;;;;;;;AAGnB","debugId":null}},
    {"offset": {"line": 79, "column": 0}, "map": {"version":3,"sources":["file:///home/user/agenko-nextjs/src/components/UtmLinkUpdater.tsx"],"sourcesContent":["// src/components/UtmLinkUpdater.tsx\n\"use client\";\n\nimport { useEffect } from 'react';\nimport { usePathname } from 'next/navigation';\n\nconst SESSION_STORAGE_KEY = 'marketing_params';\n\nexport function UtmLinkUpdater() {\n  const pathname = usePathname();\n\n  useEffect(() => {\n    // We use a setTimeout to ensure this code runs after the initial page render is complete.\n    const timer = setTimeout(() => {\n      const storedParams = sessionStorage.getItem(SESSION_STORAGE_KEY);\n      if (!storedParams) {\n        return;\n      }\n\n      const allLinks = document.getElementsByTagName('a');\n\n      for (const link of allLinks) {\n        const originalHref = link.getAttribute('href');\n\n        // Skip non-navigational links\n        if (!originalHref || originalHref.startsWith('#') || originalHref.startsWith('mailto:') || originalHref.startsWith('tel:')) {\n          continue;\n        }\n\n        try {\n          // Use link.href as it's the full, absolute URL\n          const url = new URL(link.href);\n\n          // Prevent double-appending\n          if (url.search.includes(storedParams)) {\n            continue;\n          }\n\n          // Append all stored params\n          const newSearchParams = new URLSearchParams(storedParams);\n          newSearchParams.forEach((value, key) => {\n            url.searchParams.set(key, value);\n          });\n          \n          link.href = url.toString();\n\n        } catch (e) {\n          // This catch is a fallback for any unexpected invalid hrefs\n          console.error(`Could not process link: ${originalHref}`, e);\n        }\n      }\n    }, 100); // A 100ms delay gives React ample time to render everything.\n\n    // Cleanup the timeout if the component re-renders before it fires\n    return () => clearTimeout(timer);\n\n  }, [pathname]); // Re-run this logic every time the user navigates to a new page\n\n  return null;\n}"],"names":[],"mappings":"AAAA,oCAAoC;;;;;AAGpC;AACA;AAHA;;;AAKA,MAAM,sBAAsB;AAErB,SAAS;IACd,MAAM,WAAW,IAAA,iJAAW;IAE5B,IAAA,kNAAS,EAAC;QACR,0FAA0F;QAC1F,MAAM,QAAQ,WAAW;YACvB,MAAM,eAAe,eAAe,OAAO,CAAC;YAC5C,IAAI,CAAC,cAAc;gBACjB;YACF;YAEA,MAAM,WAAW,SAAS,oBAAoB,CAAC;YAE/C,KAAK,MAAM,QAAQ,SAAU;gBAC3B,MAAM,eAAe,KAAK,YAAY,CAAC;gBAEvC,8BAA8B;gBAC9B,IAAI,CAAC,gBAAgB,aAAa,UAAU,CAAC,QAAQ,aAAa,UAAU,CAAC,cAAc,aAAa,UAAU,CAAC,SAAS;oBAC1H;gBACF;gBAEA,IAAI;oBACF,+CAA+C;oBAC/C,MAAM,MAAM,IAAI,IAAI,KAAK,IAAI;oBAE7B,2BAA2B;oBAC3B,IAAI,IAAI,MAAM,CAAC,QAAQ,CAAC,eAAe;wBACrC;oBACF;oBAEA,2BAA2B;oBAC3B,MAAM,kBAAkB,IAAI,gBAAgB;oBAC5C,gBAAgB,OAAO,CAAC,CAAC,OAAO;wBAC9B,IAAI,YAAY,CAAC,GAAG,CAAC,KAAK;oBAC5B;oBAEA,KAAK,IAAI,GAAG,IAAI,QAAQ;gBAE1B,EAAE,OAAO,GAAG;oBACV,4DAA4D;oBAC5D,QAAQ,KAAK,CAAC,CAAC,wBAAwB,EAAE,cAAc,EAAE;gBAC3D;YACF;QACF,GAAG,MAAM,6DAA6D;QAEtE,kEAAkE;QAClE,OAAO,IAAM,aAAa;IAE5B,GAAG;QAAC;KAAS,GAAG,gEAAgE;IAEhF,OAAO;AACT","debugId":null}}]
}